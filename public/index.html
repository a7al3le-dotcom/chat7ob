<!DOCTYPE html>
<html lang="ar" dir="rtl" style="height: 100%;">
<head>   
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="HandheldFriendly" content="True">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  
  <title>Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª | Ø´Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ | Ø¯Ø±Ø¯Ø´Ø© Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª | Ø´Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ | Ø§Ø³ØªØ¶Ø§ÙØ© Ø´Ø§Øª</title>
  
  <meta name="description" content="Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø¯Ø±Ø¯Ø´Ø©ØŒ Ø´Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ Ø¯Ø±Ø¯Ø´Ø© Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³ØªØŒ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ Ø´Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø§Ø³ØªØ¶Ø§ÙØ© Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª Ø§Ù„ÙƒØªØ§Ø¨ÙŠØŒ Ø´Ø§Øª Ù‡ÙˆØ³ØªØŒ Ø´Ø§Øª ÙÙˆÙ† Ù‡ÙˆØ³ØªØŒ Ø§Ø³ØªØ¶Ø§ÙØ© Ø´Ø§ØªØŒ ÙØªØ­ Ø´Ø§ØªØŒ Ù‡ÙˆØ³Øª Ø´Ø§ØªØŒ Ø§Ø³ØªØ¶Ø§ÙØ© Ø¬ÙˆØ§Ù„ØŒ Ø§Ø³ØªØ¶Ø§ÙØ© ÙÙˆÙ† Ù‡ÙˆØ³Øª Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø§Ø³ØªØ¶Ø§ÙØ© Ø¯Ø±Ø¯Ø´Ø© ÙÙˆÙ† Ù‡ÙˆØ³ØªØŒ Ø´Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø§Ø³ØªØ¶Ø§ÙØ© Ø´Ø§ØªØŒ ÙØªØ­ Ø´Ø§ØªØŒ Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ø§Ù„Ø®Ù„ÙŠØ¬ØŒ Ø´Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù‡ÙˆØ³ØªØŒ Ø¯Ø±Ø¯Ø´Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù‡ÙˆØ³ØªØŒ Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ø¬ÙˆØ§Ù„ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø¯Ø±Ø¯Ø´Ø© Ø´Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ Ø§Ù„ÙƒØªØ§Ø¨ÙŠØ© Ø§Ù„ØµÙˆØªÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ Ù„Ù„Ø¬ÙˆØ§Ù„ Ø§Ù„ÙƒØªØ§Ø¨ÙŠØŒ Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ØµÙˆØªÙŠØŒ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø´Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ØµÙˆØªÙŠØŒ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ØµÙˆØªÙŠØ©ØŒ Ø´Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø´Ø§Øª.Ø¯Ø±Ø¯Ø´Ø©.Ø§Ù„Ø±ÙŠØ§Ø¶.Ø§Ù„ØµÙˆØªÙŠØŒ Ø´Ø§Øª Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ Ø§Ù„ÙƒØªØ§Ø¨ÙŠ Ø§Ù„ØµÙˆØªÙŠ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ Ø´Ø§Øª Ø¹Ø´Ù‚ØŒ Ø¯Ø±Ø¯Ø´Ø©ØŒ Ø¹Ø´Ù‚ØŒ Ø´Ø§Øª Ø¹Ø´Ù‚ Ø§Ù„Ø®Ù„ÙŠØ¬ØŒ Ø´Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø¯Ø±Ø¯Ø´Ø© ÙƒØªØ§Ø¨ÙŠØŒ Ø´Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ Ø´Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø´Ø§Øª Ø·ÙŠÙÙƒ Ù„Ù„Ø¬ÙˆØ§Ù„ØŒ ØªØ§ÙŠØ¬Ø± Ù‡ÙˆØ³ØªØŒ Ø¯Ø±Ø¯Ø´Ø© Ø·ÙŠÙÙƒØŒ Ø´Ø§Øª Ø·ÙŠÙÙƒ Ø§Ù„ØµÙˆØªÙŠ">

  <style>
    /* Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      font-family: Tahoma, Geneva, sans-serif;
      background-color: #40404f;
      color: #333;
    }
    
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px;
    }
    
    /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
    .main-wrapper {
      width: 100%;
      max-width: 400px;
      height: 100%;
      max-height: 700px;
      background-color: white;
      border-radius: 5px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }
    
    /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø£ØµÙ„ÙŠ */
    .header {
      background-color: #2F5C73;
      color: white;
      padding: 8px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #1a4557;
    }
    
    .header-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .header-title {
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      flex-grow: 1;
    }
    
    /* Ø§Ù„Ø¨Ù†Ø± ØªØ­Øª Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .banner {
      text-align: center;
      padding: 8px 5px;
      background: linear-gradient(45deg, #4a5f6e, #5a6f7e);
      color: white;
      font-weight: bold;
      font-size: 14px;
      border-bottom: 2px solid #3a4f5e;
    }
    
    /* ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    .tabs {
      display: flex;
      background-color: white;
      border-bottom: 1px solid #ddd;
    }
    
    .tab {
      flex: 1;
      text-align: center;
      padding: 10px 5px;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      font-size: 14px;
    }
    
    .tab.active {
      border-bottom: 2px solid #2F5C73;
      color: #2F5C73;
      font-weight: bold;
    }
    
    /* Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    .login-forms {
      padding: 10px;
      background-color: #f5f5f5;
    }
    
    .login-form {
      display: none;
    }
    
    .login-form.active {
      display: block;
    }
    
    .form-input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    .form-btn {
      background-color: #2F5C73;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
    }
    
    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© */
    .status-bar {
      background-color: #2F5C73;
      color: white;
      padding: 5px 10px;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† */
    .online-users {
      background-color: #fafafa;
      padding: 10px;
      height: 150px;
      overflow-y: auto;
      border-bottom: 1px solid #eee;
    }
    
    .user-item {
      padding: 5px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .user-item:hover {
      background-color: #f0f0f0;
    }
    
    .no-users {
      text-align: center;
      color: #888;
      font-style: italic;
      padding: 20px 0;
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
    .chat-area {
      display: none;
      flex-direction: column;
      height: 100%;
    }
    
    .messages-container {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      background-color: #f9f9f9;
    }

    /* ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .message {
      margin-bottom: 15px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      position: relative;
    }
    
    .system-message {
      text-align: center;
      margin: 10px 0;
    }
    
    .system-message .message-content {
      background-color: #e9ecef;
      border-color: #dee2e6;
    }
    
    .system-message .message-text {
      color: #6c757d;
      font-style: italic;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      background-color: #2F5C73;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 16px;
      flex-shrink: 0;
      cursor: pointer;
      background-size: cover;
      background-position: center;
    }
    
    .admin-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #dc3545;
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .message-content {
      flex: 1;
      background-color: white;
      border-radius: 8px;
      padding: 10px;
      border: 1px solid #e0e0e0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      position: relative;
    }
    
    .message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }
    
    .message-sender {
      font-weight: bold;
      color: #2F5C73;
      font-size: 14px;
      cursor: pointer;
    }
    
    .admin-sender {
      color: #dc3545;
    }
    
    .message-time {
      font-size: 11px;
      color: #888;
    }
    
    .message-text {
      font-size: 14px;
      line-height: 1.4;
      word-wrap: break-word;
    }
    
    .delete-message-btn {
      position: absolute;
      top: 5px;
      left: 5px;
      background: rgba(220, 53, 69, 0.8);
      color: white;
      border: none;
      border-radius: 3px;
      width: 20px;
      height: 20px;
      font-size: 10px;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
    }
    
    .message-content:hover .delete-message-btn {
      display: flex;
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© */
    .microphones-panel {
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
      padding: 10px;
    }
    
    .microphones-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .microphones-title {
      font-size: 14px;
      font-weight: bold;
      color: #2F5C73;
    }
    
    .mute-all-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      font-size: 12px;
      cursor: pointer;
    }

    .mic-settings-btn {
      background: #2F5C73;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      font-size: 12px;
      cursor: pointer;
      margin-left: 5px;
    }
    
    .microphones-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }
    
    .microphone-slot {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      padding: 8px 5px;
      text-align: center;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .microphone-slot.active {
      border-color: #28a745;
      background: #f8fff9;
    }
    
    .microphone-slot.muted {
      border-color: #6c757d;
      background: #f8f9fa;
    }

    .microphone-slot.priority {
      border-color: #ffc107;
      background: #fffbf0;
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª */
    .microphone-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }

    .mic-number {
      font-weight: bold;
      font-size: 12px;
      color: #2F5C73;
    }

    .priority-badge {
      background: #ffc107;
      color: black;
      padding: 2px 5px;
      border-radius: 3px;
      font-size: 10px;
      font-weight: bold;
    }

    .microphone-user {
      font-size: 10px;
      font-weight: bold;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .mic-time {
      font-size: 9px;
      color: #666;
      margin: 3px 0;
    }
    
    .microphone-controls {
      display: flex;
      justify-content: center;
      gap: 3px;
      margin: 5px 0;
    }
    
    .mic-btn {
      width: 20px;
      height: 20px;
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 8px;
    }
    
    .mic-toggle {
      background: #28a745;
      color: white;
    }

    .mic-toggle.active {
      background: #dc3545;
    }
    
    .mic-mute {
      background: #ffc107;
      color: black;
    }

    .mic-mute.muted {
      background: #6c757d;
    }
    
    .mic-kick {
      background: #dc3545;
      color: white;
      display: none;
    }

    .mic-leave {
      background: #6c757d !important;
      color: white;
    }

    .mic-priority {
      background: #ffc107 !important;
      color: black !important;
    }

    .mic-join {
      background: #28a745 !important;
      color: white;
    }
    
    .microphone-slot:hover .mic-kick {
      display: flex;
    }

    .mic-advanced-controls {
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid #eee;
      display: none;
    }

    .microphone-slot.active .mic-advanced-controls {
      display: block;
    }

    .volume-control {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 5px;
    }

    .volume-control label {
      font-size: 9px;
      color: #666;
    }

    .volume-control input {
      flex: 1;
      height: 3px;
    }

    .mic-settings {
      display: flex;
      gap: 5px;
    }

    .setting-btn {
      background: #f8f9fa;
      border: 1px solid #ddd;
      padding: 2px 4px;
      border-radius: 3px;
      font-size: 8px;
      cursor: pointer;
    }

    .setting-btn.active {
      background: #2F5C73;
      color: white;
    }
    
    .mic-status {
      font-size: 8px;
      margin-top: 3px;
      color: #6c757d;
    }
    
    .mic-talking {
      color: #28a745;
      font-weight: bold;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© */
    .input-area {
      display: flex;
      padding: 10px;
      background-color: white;
      border-top: 1px solid #eee;
      gap: 5px;
      align-items: center;
    }
    
    .message-input {
      flex: 1;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-size: 14px;
    }
    
    .emoji-btn {
      background: #ffc107;
      color: white;
      border: none;
      padding: 8px 10px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .send-btn {
      background-color: #2F5C73;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .logout-btn {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .admin-btn {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 14px;
      display: none;
    }
    
    /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
    .footer {
      background-color: white;
      padding: 5px 10px;
      text-align: center;
      font-size: 12px;
      color: #666;
      border-top: 1px solid #eee;
    }
    
    /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
    .emoji-panel {
      display: none;
      position: absolute;
      bottom: 60px;
      left: 10px;
      right: 10px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      z-index: 100;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .emoji-categories {
      display: flex;
      gap: 5px;
      margin-bottom: 10px;
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    
    .emoji-category {
      padding: 5px 10px;
      border: none;
      background: #f5f5f5;
      border-radius: 3px;
      cursor: pointer;
      font-size: 12px;
    }
    
    .emoji-category.active {
      background: #2F5C73;
      color: white;
    }
    
    .emoji-grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 5px;
    }
    
    .emoji {
      font-size: 18px;
      cursor: pointer;
      text-align: center;
      padding: 5px;
      border-radius: 3px;
    }
    
    .emoji:hover {
      background: #f0f0f0;
    }

    /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .modal-content {
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 400px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #2F5C73;
    }

    .close-modal {
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      cursor: pointer;
      font-size: 18px;
    }

    .setting-item {
      margin-bottom: 15px;
    }

    .setting-item label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
    .admin-panel {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      padding: 20px;
      overflow-y: auto;
    }
    
    .admin-content {
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 100%;
      margin: 0 auto;
    }
    
    .admin-header {
      display: flex;
      justify-content: between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #2F5C73;
    }
    
    .admin-title {
      font-size: 18px;
      font-weight: bold;
      color: #2F5C73;
    }
    
    .close-admin {
      background: #dc3545;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
    }
    
    .admin-section {
      margin-bottom: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 5px;
      border: 1px solid #dee2e6;
    }
    
    .admin-section h3 {
      margin-bottom: 10px;
      color: #2F5C73;
      font-size: 16px;
    }
    
    .admin-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .admin-btn-small {
      background: #2F5C73;
      color: white;
      border: none;
      padding: 8px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 12px;
    }
    
    .admin-btn-danger {
      background: #dc3545;
    }
    
    .user-list {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 3px;
      padding: 5px;
    }
    
    .user-list-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      border-bottom: 1px solid #eee;
    }
    
    .user-list-item:last-child {
      border-bottom: none;
    }
    
    .user-actions {
      display: flex;
      gap: 5px;
    }
    
    /* Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
    .profile-panel {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      padding: 20px;
      overflow-y: auto;
    }
    
    .profile-content {
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 100%;
      margin: 0 auto;
    }
    
    .profile-header {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #2F5C73;
    }
    
    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 10px;
      background: #2F5C73;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 32px;
      font-weight: bold;
      cursor: pointer;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .change-avatar-btn {
      position: absolute;
      bottom: -5px;
      right: -5px;
      background: #2F5C73;
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      font-size: 12px;
      cursor: pointer;
    }
    
    .profile-info {
      flex: 1;
    }
    
    .profile-name {
      font-size: 18px;
      font-weight: bold;
      color: #2F5C73;
      margin-bottom: 5px;
    }
    
    .profile-role {
      font-size: 14px;
      color: #666;
      margin-bottom: 10px;
    }
    
    .profile-stats {
      display: flex;
      gap: 15px;
      font-size: 12px;
      color: #888;
    }
    
    .profile-section {
      margin-bottom: 20px;
    }
    
    .profile-section h3 {
      margin-bottom: 10px;
      color: #2F5C73;
      font-size: 16px;
    }
    
    .profile-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    .profile-btn {
      background: #2F5C73;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .profile-btn.danger {
      background: #dc3545;
    }
    
    .profile-btn.success {
      background: #28a745;
    }
    
    .admin-actions {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 5px;
      border: 1px solid #dee2e6;
    }
    
    /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .loading-indicator {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
    }
    
    .loading-content {
      background: white;
      padding: 20px;
      border-radius: 5px;
      text-align: center;
    }
    
    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
    @media (max-width: 480px) {
      body {
        padding: 5px;
      }
      
      .main-wrapper {
        max-height: 100%;
        border-radius: 0;
      }
      
      .user-avatar {
        width: 35px;
        height: 35px;
        font-size: 14px;
      }
      
      .admin-controls {
        grid-template-columns: 1fr;
      }
      
      .input-area {
        flex-wrap: wrap;
      }
      
      .message-input {
        margin-bottom: 5px;
      }
      
      .microphones-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .emoji-grid {
        grid-template-columns: repeat(6, 1fr);
      }
      
      .profile-actions {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head> 

<body>
  <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div class="main-wrapper">
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div id="loginScreen">
      <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
      <div class="header">
        <div class="header-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
            <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
          </svg>
        </div>
        <div class="header-title">Ø¯Ø±Ø¯Ø´Ø© Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª | Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª</div>
        <div class="header-icon" onclick="location.reload()">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </div>
      </div>
      
      <!-- Ø§Ù„Ø¨Ù†Ø± ØªØ­Øª Ø§Ù„Ù‡ÙŠØ¯Ø± -->
      <div class="banner">
        Ø´Ø§Øª Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª - Ø£ÙØ¶Ù„ Ù…Ù†ØµØ© Ø¯Ø±Ø¯Ø´Ø© Ø¹Ø±Ø¨ÙŠØ©
      </div>
      
      <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
      <div class="tabs">
        <div class="tab active" onclick="switchTab(1)">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø²ÙˆØ§Ø±</div>
        <div class="tab" onclick="switchTab(2)">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</div>
        <div class="tab" onclick="switchTab(3)">ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØ©</div>
      </div>
      
      <!-- Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
      <div class="login-forms">
        <!-- Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø²ÙˆØ§Ø± -->
        <div class="login-form active" id="form1">
          <input type="text" class="form-input" id="guestName" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±" maxlength="20">
          <button class="form-btn" onclick="login(1)">Ø¯Ø®ÙˆÙ„</button>
        </div>
        
        <!-- Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ -->
        <div class="login-form" id="form2">
          <input type="text" class="form-input" id="memberName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ" maxlength="20">
          <input type="password" class="form-input" id="memberPassword" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
          <button class="form-btn" onclick="login(2)">Ø¯Ø®ÙˆÙ„</button>
        </div>
        
        <!-- ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØ© -->
        <div class="login-form" id="form3">
          <input type="text" class="form-input" id="newName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ" maxlength="20">
          <input type="password" class="form-input" id="newPassword" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
          <button class="form-btn" onclick="login(3)">ØªØ³Ø¬ÙŠÙ„</button>
        </div>
      </div>
      
      <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© -->
      <div class="status-bar">
        <span id="loginStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
        <span id="onlineCount">0 Ù…ØªÙˆØ§Ø¬Ø¯</span>
      </div>
      
      <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† -->
      <div class="online-users" id="onlineUsers">
        <div class="no-users">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹</div>
      </div>
      
      <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ - Ø³ÙŠØªÙ… Ø¥Ø®ÙØ§Ø¤Ù‡ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
      <div class="footer" id="copyrightFooter">
        Copyright Â© 2021-2023 <a href="https://jawalhost.com/" style="color: #2F5C73;">Ø¬ÙˆØ§Ù„ Ù‡ÙˆØ³Øª</a>. All Rights Reserved
      </div>
    </div>
    
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
    <div class="chat-area" id="chatScreen">
      <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª -->
      <div class="microphones-panel">
        <div class="microphones-header">
          <div class="microphones-title">Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
          <div>
            <button class="mute-all-btn" onclick="toggleMuteAll()">ÙƒØªÙ… Ø§Ù„ÙƒÙ„</button>
            <button class="mic-settings-btn" onclick="openMicrophoneSettings()">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
          </div>
        </div>
        <div class="microphones-grid" id="microphonesGrid">
          <!-- Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </div>
      </div>
      
      <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
      <div class="messages-container" id="messagesContainer">
        <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù‡Ù†Ø§ -->
      </div>
      
      <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ -->
      <div class="emoji-panel" id="emojiPanel">
        <div class="emoji-categories">
          <button class="emoji-category active" onclick="switchEmojiCategory('faces')">ÙˆØ¬ÙˆÙ‡</button>
          <button class="emoji-category" onclick="switchEmojiCategory('hearts')">Ù‚Ù„ÙˆØ¨</button>
          <button class="emoji-category" onclick="switchEmojiCategory('objects')">Ø£Ø´ÙŠØ§Ø¡</button>
          <button class="emoji-category" onclick="switchEmojiCategory('symbols')">Ø±Ù…ÙˆØ²</button>
        </div>
        <div class="emoji-grid" id="emojiGrid">
          <!-- Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø³ÙŠØ¶Ø§Ù Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </div>
      </div>
      
      <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
      <div class="input-area">
        <input type="text" class="message-input" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." maxlength="1000">
        <button class="emoji-btn" onclick="toggleEmojiPanel()">ğŸ˜Š</button>
        <button class="admin-btn" id="adminPanelBtn" onclick="openAdminPanel()">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
        <button class="logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
        <button class="send-btn" onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </div>
    
    <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="admin-panel" id="adminPanel">
      <div class="admin-content">
        <div class="admin-header">
          <div class="admin-title">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù</div>
          <button class="close-admin" onclick="closeAdminPanel()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
        
        <div class="admin-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</h3>
          <div class="admin-controls">
            <button class="admin-btn-small" onclick="addCustomEmoji()">Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù…Ø®ØµØµ</button>
            <button class="admin-btn-small" onclick="manageEmojiCategories()">Ø¥Ø¯Ø§Ø±Ø© ÙØ¦Ø§Øª Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</button>
            <button class="admin-btn-small admin-btn-danger" onclick="resetEmojiSettings()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</button>
          </div>
        </div>
        
        <div class="admin-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª</h3>
          <div class="admin-controls">
            <button class="admin-btn-small" onclick="resetAllMicrophones()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø§ÙŠÙƒØ§Øª</button>
            <button class="admin-btn-small" onclick="shuffleMicrophones()">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø§ÙŠÙƒØ§Øª</button>
            <button class="admin-btn-small admin-btn-danger" onclick="kickAllFromMicrophones()">Ø·Ø±Ø¯ Ø§Ù„Ø¬Ù…ÙŠØ¹ Ù…Ù† Ø§Ù„Ù…Ø§ÙŠÙƒØ§Øª</button>
          </div>
        </div>
        
        <div class="admin-section">
          <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
          <div class="admin-controls">
            <button class="admin-btn-small" onclick="kickUser()">Ø·Ø±Ø¯ Ù…Ø³ØªØ®Ø¯Ù…</button>
            <button class="admin-btn-small" onclick="banUser()">Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù…</button>
            <button class="admin-btn-small" onclick="muteUser()">ÙƒØªÙ… Ù…Ø³ØªØ®Ø¯Ù…</button>
            <button class="admin-btn-small admin-btn-danger" onclick="clearChat()">Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</button>
          </div>
          <div class="user-list" id="userList">
            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
          </div>
        </div>
      </div>
    </div>
    
    <!-- Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div class="profile-panel" id="profilePanel">
      <div class="profile-content">
        <div class="profile-header">
          <div class="profile-avatar" id="profileAvatar" onclick="changeAvatar()">
            <button class="change-avatar-btn">+</button>
          </div>
          <div class="profile-info">
            <div class="profile-name" id="profileName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
            <div class="profile-role" id="profileRole">Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</div>
            <div class="profile-stats">
              <span>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="profilePoints">0</span></span>
              <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="profileLevel">1</span></span>
              <span>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: <span id="profileRating">â­</span></span>
            </div>
          </div>
        </div>
        
        <div class="profile-section">
          <h3>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</h3>
          <div class="profile-actions">
            <button class="profile-btn" onclick="sendPrivateMessage()">Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©</button>
            <button class="profile-btn" onclick="viewProfileHistory()">Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·</button>
          </div>
        </div>
        
        <div class="profile-section" id="adminProfileSection" style="display: none;">
          <h3>Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø´Ø±Ù</h3>
          <div class="admin-actions">
            <div class="profile-actions">
              <button class="profile-btn danger" onclick="adminKickUser()">Ø·Ø±Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
              <button class="profile-btn danger" onclick="adminBanUser()">Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
              <button class="profile-btn" onclick="adminMuteUser()">ÙƒØªÙ… Ø§Ù„ØµÙˆØª</button>
              <button class="profile-btn" onclick="adminViewIP()">ÙƒØ´Ù IP</button>
              <button class="profile-btn success" onclick="adminPromoteUser()">ØªØ±Ù‚ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
              <button class="profile-btn danger" onclick="adminRemoveAvatar()">Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø©</button>
            </div>
          </div>
        </div>
        
        <div class="profile-section">
          <button class="profile-btn" onclick="closeProfile()" style="background: #6c757d; width: 100%;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
      </div>
    </div>

    <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div class="loading-indicator" id="loadingIndicator">
      <div class="loading-content" id="loadingContent">
        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    let currentUser = '';
    let currentTab = 1;
    let userRole = 'user'; // user, admin, moderator
    let socket = null;
    let sessionId = null;
    const adminUsers = ['admin', 'administrator', 'Ù…Ø´Ø±Ù', 'Ø§Ø¯Ù…Ù†', 'Ù…Ø¯ÙŠØ±'];
    const moderatorUsers = ['moderator', 'Ù…Ø´Ø±Ù', 'Ù…Ø±Ø§Ù‚Ø¨', 'mod'];
    let currentProfileUser = null;
    let reconnectAttempts = 0;
    const maxReconnectAttempts = 5;
    
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©
    let microphones = [
        { 
            id: 1, 
            user: null, 
            active: false, 
            muted: false, 
            talking: false,
            volume: 100,
            noiseCancel: true,
            priority: false,
            joinTime: null
        },
        { 
            id: 2, 
            user: null, 
            active: false, 
            muted: false, 
            talking: false,
            volume: 100,
            noiseCancel: true,
            priority: false,
            joinTime: null
        },
        { 
            id: 3, 
            user: null, 
            active: false, 
            muted: false, 
            talking: false,
            volume: 100,
            noiseCancel: true,
            priority: false,
            joinTime: null
        },
        { 
            id: 4, 
            user: null, 
            active: false, 
            muted: false, 
            talking: false,
            volume: 100,
            noiseCancel: true,
            priority: false,
            joinTime: null
        },
        { 
            id: 5, 
            user: null, 
            active: false, 
            muted: false, 
            talking: false,
            volume: 100,
            noiseCancel: true,
            priority: false,
            joinTime: null
        }
    ];

    let isMuteAll = false;
    let autoLeaveMic = true;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    const emojis = {
        faces: ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ™ƒ', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ¥°', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ¤¨', 'ğŸ§', 'ğŸ¤“', 'ğŸ˜', 'ğŸ¤©', 'ğŸ¥³', 'ğŸ˜', 'ğŸ˜’', 'ğŸ˜', 'ğŸ˜”', 'ğŸ˜Ÿ', 'ğŸ˜•', 'ğŸ™', 'â˜¹ï¸', 'ğŸ˜£', 'ğŸ˜–', 'ğŸ˜«', 'ğŸ˜©', 'ğŸ¥º', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¤', 'ğŸ˜ ', 'ğŸ˜¡', 'ğŸ¤¬', 'ğŸ¤¯', 'ğŸ˜³', 'ğŸ¥µ', 'ğŸ¥¶', 'ğŸ˜±', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜“', 'ğŸ¤—', 'ğŸ¤”', 'ğŸ¤­', 'ğŸ¤«', 'ğŸ¤¥', 'ğŸ˜¶', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¬', 'ğŸ™„', 'ğŸ˜¯', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜®', 'ğŸ˜²', 'ğŸ¥±', 'ğŸ˜´', 'ğŸ¤¤', 'ğŸ˜ª', 'ğŸ˜µ', 'ğŸ¤', 'ğŸ¥´', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤‘', 'ğŸ¤ '],
        hearts: ['â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ–¤', 'ğŸ¤', 'ğŸ¤', 'ğŸ’”', 'â£ï¸', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–', 'ğŸ’˜', 'ğŸ’'],
        objects: ['âŒš', 'ğŸ“±', 'ğŸ“²', 'ğŸ’»', 'âŒ¨ï¸', 'ğŸ–¥ï¸', 'ğŸ–¨ï¸', 'ğŸ–±ï¸', 'ğŸ–²ï¸', 'ğŸ•¹ï¸', 'ğŸ—œï¸', 'ğŸ’½', 'ğŸ’¾', 'ğŸ’¿', 'ğŸ“€', 'ğŸ“¼', 'ğŸ“·', 'ğŸ“¸', 'ğŸ“¹', 'ğŸ¥', 'ğŸ“½ï¸', 'ğŸï¸', 'ğŸ“', 'â˜ï¸', 'ğŸ“Ÿ', 'ğŸ“ ', 'ğŸ“º', 'ğŸ“»', 'ğŸ™ï¸', 'ğŸšï¸', 'ğŸ›ï¸', 'ğŸ§­', 'â±ï¸', 'â²ï¸', 'â°', 'ğŸ•°ï¸', 'âŒ›', 'â³', 'ğŸ“¡', 'ğŸ”‹', 'ğŸ”Œ', 'ğŸ’¡', 'ğŸ”¦', 'ğŸ•¯ï¸', 'ğŸª”', 'ğŸ§¯', 'ğŸ›¢ï¸', 'ğŸ’¸', 'ğŸ’µ', 'ğŸ’´', 'ğŸ’¶', 'ğŸ’·', 'ğŸ’°', 'ğŸ’³', 'ğŸ’', 'âš–ï¸', 'ğŸ§°', 'ğŸ”§', 'ğŸ”¨', 'âš’ï¸', 'ğŸ› ï¸', 'â›ï¸', 'ğŸ”©', 'âš™ï¸', 'ğŸ§±', 'â›“ï¸', 'ğŸ§²', 'ğŸ”«', 'ğŸ’£', 'ğŸ§¨', 'ğŸª“', 'ğŸ”ª', 'ğŸ—¡ï¸', 'âš”ï¸', 'ğŸ›¡ï¸', 'ğŸš¬', 'âš°ï¸', 'âš±ï¸', 'ğŸº', 'ğŸ”®', 'ğŸ“¿', 'ğŸ§¿', 'ğŸ’ˆ', 'âš—ï¸', 'ğŸ”­', 'ğŸ”¬', 'ğŸ•³ï¸', 'ğŸ©¹', 'ğŸ©º', 'ğŸ’Š', 'ğŸ’‰', 'ğŸ©¸', 'ğŸ§¬', 'ğŸ¦ ', 'ğŸ§«', 'ğŸ§ª', 'ğŸŒ¡ï¸', 'ğŸ§¹', 'ğŸ§º', 'ğŸ§»', 'ğŸš½', 'ğŸš°', 'ğŸš¿', 'ğŸ›', 'ğŸ›€', 'ğŸ§¼', 'ğŸª’', 'ğŸ§½', 'ğŸ§´', 'ğŸ›ï¸', 'ğŸ”‘', 'ğŸ—ï¸', 'ğŸšª', 'ğŸª‘', 'ğŸ›‹ï¸', 'ğŸ›ï¸', 'ğŸ›Œ', 'ğŸ§¸', 'ğŸ–¼ï¸', 'ğŸ›ï¸', 'ğŸ›’', 'ğŸ', 'ğŸˆ', 'ğŸ', 'ğŸ€', 'ğŸŠ', 'ğŸ‰', 'ğŸ', 'ğŸ®', 'ğŸ', 'âœ‰ï¸', 'ğŸ“©', 'ğŸ“¨', 'ğŸ“§', 'ğŸ’Œ', 'ğŸ“¥', 'ğŸ“¤', 'ğŸ“¦', 'ğŸ·ï¸', 'ğŸ“ª', 'ğŸ“«', 'ğŸ“¬', 'ğŸ“­', 'ğŸ“®', 'ğŸ“¯', 'ğŸ“œ', 'ğŸ“ƒ', 'ğŸ“„', 'ğŸ“‘', 'ğŸ§¾', 'ğŸ“Š', 'ğŸ“ˆ', 'ğŸ“‰', 'ğŸ—’ï¸', 'ğŸ—“ï¸', 'ğŸ“†', 'ğŸ“…', 'ğŸ—‘ï¸', 'ğŸ“‡', 'ğŸ—ƒï¸', 'ğŸ—³ï¸', 'ğŸ—„ï¸', 'ğŸ“‹', 'ğŸ“', 'ğŸ“‚', 'ğŸ—‚ï¸', 'ğŸ—ï¸', 'ğŸ“°', 'ğŸ““', 'ğŸ“”', 'ğŸ“’', 'ğŸ“•', 'ğŸ“—', 'ğŸ“˜', 'ğŸ“™', 'ğŸ“š', 'ğŸ“–', 'ğŸ”–', 'ğŸ§·', 'ğŸ”—', 'ğŸ“', 'ğŸ–‡ï¸', 'ğŸ“', 'ğŸ“', 'ğŸ§®', 'ğŸ“Œ', 'ğŸ“', 'âœ‚ï¸', 'ğŸ–Šï¸', 'ğŸ–‹ï¸', 'âœ’ï¸', 'ğŸ–Œï¸', 'ğŸ–ï¸', 'ğŸ“', 'âœï¸', 'ğŸ”', 'ğŸ”', 'ğŸ”', 'ğŸ”', 'ğŸ”’', 'ğŸ”“'],
        symbols: ['â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ–¤', 'ğŸ¤', 'ğŸ¤', 'ğŸ’”', 'â£ï¸', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–', 'ğŸ’˜', 'ğŸ’', 'â˜®ï¸', 'âœï¸', 'â˜ªï¸', 'ğŸ•‰ï¸', 'â˜¸ï¸', 'âœ¡ï¸', 'ğŸ”¯', 'ğŸ•', 'â˜¯ï¸', 'â˜¦ï¸', 'ğŸ›', 'â›', 'â™ˆ', 'â™‰', 'â™Š', 'â™‹', 'â™Œ', 'â™', 'â™', 'â™', 'â™', 'â™‘', 'â™’', 'â™“', 'ğŸ†”', 'âš›ï¸', 'ğŸ‰‘', 'â˜¢ï¸', 'â˜£ï¸', 'ğŸ“´', 'ğŸ“³', 'ğŸˆ¶', 'ğŸˆš', 'ğŸˆ¸', 'ğŸˆº', 'ğŸˆ·ï¸', 'âœ´ï¸', 'ğŸ†š', 'ğŸ’®', 'ğŸ‰', 'ãŠ™ï¸', 'ãŠ—ï¸', 'ğŸˆ´', 'ğŸˆµ', 'ğŸˆ¹', 'ğŸˆ²', 'ğŸ…°ï¸', 'ğŸ…±ï¸', 'ğŸ†', 'ğŸ†‘', 'ğŸ…¾ï¸', 'ğŸ†˜', 'âŒ', 'â­•', 'ğŸ›‘', 'â›”', 'ğŸ“›', 'ğŸš«', 'ğŸ’¯', 'ğŸ’¢', 'â™¨ï¸', 'ğŸš·', 'ğŸš¯', 'ğŸš³', 'ğŸš±', 'ğŸ”', 'ğŸ“µ', 'ğŸš­', 'â—', 'â•', 'â“', 'â”', 'â€¼ï¸', 'â‰ï¸', 'ğŸ”…', 'ğŸ”†', 'ã€½ï¸', 'âš ï¸', 'ğŸš¸', 'ğŸ”±', 'âšœï¸', 'ğŸ”°', 'â™»ï¸', 'âœ…', 'ğŸˆ¯', 'ğŸ’¹', 'â‡ï¸', 'âœ³ï¸', 'â', 'ğŸŒ', 'ğŸ’ ', 'â“‚ï¸', 'ğŸŒ€', 'ğŸ’¤', 'ğŸ§', 'ğŸš¾', 'â™¿', 'ğŸ…¿ï¸', 'ğŸˆ³', 'ğŸˆ‚ï¸', 'ğŸ›‚', 'ğŸ›ƒ', 'ğŸ›„', 'ğŸ›…', 'ğŸš¹', 'ğŸšº', 'ğŸš¼', 'ğŸš»', 'ğŸš®', 'ğŸ¦', 'ğŸ“¶', 'ğŸˆ', 'ğŸ”£', 'â„¹ï¸', 'ğŸ”¤', 'ğŸ”¡', 'ğŸ” ', 'ğŸ†–', 'ğŸ†—', 'ğŸ†™', 'ğŸ†’', 'ğŸ†•', 'ğŸ†“', '0ï¸âƒ£', '1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ğŸ”Ÿ', 'ğŸ”¢', '#ï¸âƒ£', '*ï¸âƒ£', 'âï¸', 'â–¶ï¸', 'â¸ï¸', 'â¯ï¸', 'â¹ï¸', 'âºï¸', 'â­ï¸', 'â®ï¸', 'â©', 'âª', 'â«', 'â¬', 'â—€ï¸', 'ğŸ”¼', 'ğŸ”½', 'â¡ï¸', 'â¬…ï¸', 'â¬†ï¸', 'â¬‡ï¸', 'â†—ï¸', 'â†˜ï¸', 'â†™ï¸', 'â†–ï¸', 'â†•ï¸', 'â†”ï¸', 'â†ªï¸', 'â†©ï¸', 'â¤´ï¸', 'â¤µï¸', 'ğŸ”€', 'ğŸ”', 'ğŸ”‚', 'ğŸ”„', 'ğŸ”ƒ', 'ğŸµ', 'ğŸ¶', 'â•', 'â–', 'â—', 'âœ–ï¸', 'â™¾ï¸', 'ğŸ’²', 'ğŸ’±', 'â„¢ï¸', 'Â©ï¸', 'Â®ï¸', 'ã€°ï¸', 'â°', 'â¿', 'ğŸ”š', 'ğŸ”™', 'ğŸ”›', 'ğŸ”', 'ğŸ”œ', 'âœ”ï¸', 'â˜‘ï¸', 'ğŸ”˜', 'ğŸ”´', 'ğŸŸ ', 'ğŸŸ¡', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŸ£', 'âš«', 'âšª', 'ğŸŸ¤', 'ğŸ”º', 'ğŸ”»', 'ğŸ”¸', 'ğŸ”¹', 'ğŸ”¶', 'ğŸ”·', 'ğŸ”³', 'ğŸ”²', 'â–ªï¸', 'â–«ï¸', 'â—¾', 'â—½', 'â—¼ï¸', 'â—»ï¸', 'ğŸŸ¥', 'ğŸŸ§', 'ğŸŸ¨', 'ğŸŸ©', 'ğŸŸ¦', 'ğŸŸª', 'â¬›', 'â¬œ', 'ğŸŸ«', 'ğŸ”ˆ', 'ğŸ”‡', 'ğŸ”‰', 'ğŸ”Š', 'ğŸ””', 'ğŸ”•', 'ğŸ“£', 'ğŸ“¢', 'ğŸ‘ï¸â€ğŸ—¨ï¸', 'ğŸ’¬', 'ğŸ’­', 'ğŸ—¯ï¸', 'â™ ï¸', 'â™£ï¸', 'â™¥ï¸', 'â™¦ï¸', 'ğŸƒ', 'ğŸ´', 'ğŸ€„', 'ğŸ•', 'ğŸ•‘', 'ğŸ•’', 'ğŸ•“', 'ğŸ•”', 'ğŸ••', 'ğŸ•–', 'ğŸ•—', 'ğŸ•˜', 'ğŸ•™', 'ğŸ•š', 'ğŸ•›', 'ğŸ•œ', 'ğŸ•', 'ğŸ•', 'ğŸ•Ÿ', 'ğŸ• ', 'ğŸ•¡', 'ğŸ•¢', 'ğŸ•£', 'ğŸ•¤', 'ğŸ•¥', 'ğŸ•¦', 'ğŸ•§']
    };

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    document.addEventListener('DOMContentLoaded', function() {
        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…
        initializeSocket();
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        setupEventListeners();
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª
        renderMicrophones();
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
        loadEmojis('faces');
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        checkSavedSession();
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ±Ùƒ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        setupAutoLeave();
    });

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø³ÙˆÙƒÙŠØª Ù…Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„
    function initializeSocket() {
        showLoading('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...');
        
        socket = io({
            reconnection: true,
            reconnectionAttempts: maxReconnectAttempts,
            reconnectionDelay: 1000,
            timeout: 20000
        });

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        setupSocketListeners();
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø³ÙˆÙƒÙŠØª
    function setupSocketListeners() {
        // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø§ØªØµØ§Ù„
        socket.on('connect', () => {
            console.log('Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
            hideLoading();
            document.getElementById('loginStatus').textContent = 'Ù…ØªØµÙ„';
            reconnectAttempts = 0;
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
            if (sessionId) {
                socket.emit('restore-session', { sessionId: sessionId });
            }
        });

        socket.on('disconnect', (reason) => {
            console.log('Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„:', reason);
            document.getElementById('loginStatus').textContent = 'Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„';
            
            if (reason === 'io server disconnect') {
                // Ø§Ù„Ø®Ø§Ø¯Ù… Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ù†Ø­ØªØ§Ø¬ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹
                socket.connect();
            }
        });

        socket.on('reconnect', (attemptNumber) => {
            console.log('Ø£Ø¹ÙŠØ¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¹Ø¯', attemptNumber, 'Ù…Ø­Ø§ÙˆÙ„Ø§Øª');
            document.getElementById('loginStatus').textContent = 'Ù…ØªØµÙ„';
            
            // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„
            if (currentUser) {
                socket.emit('user-joined', {
                    username: currentUser,
                    role: userRole
                });
            }
        });

        socket.on('reconnect_attempt', (attemptNumber) => {
            console.log('Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„:', attemptNumber);
            document.getElementById('loginStatus').textContent = `Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„... (${attemptNumber}/${maxReconnectAttempts})`;
            reconnectAttempts = attemptNumber;
        });

        socket.on('reconnect_error', (error) => {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„:', error);
            document.getElementById('loginStatus').textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
        });

        socket.on('connect_error', (error) => {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
            hideLoading();
            document.getElementById('loginStatus').textContent = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„';
            alert('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.');
        });

        // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        socket.on('update-users', (users) => {
            updateOnlineUsers(users);
        });
        
        socket.on('user-count', (count) => {
            document.getElementById('onlineCount').textContent = `${count} Ù…ØªÙˆØ§Ø¬Ø¯`;
        });
        
        socket.on('new-message', (messageData) => {
            addMessageToChat(messageData);
        });
        
        socket.on('current-data', (data) => {
            updateOnlineUsers(data.users);
            document.getElementById('onlineCount').textContent = `${data.users.length} Ù…ØªÙˆØ§Ø¬Ø¯`;
            
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
            data.messages.forEach(message => {
                addMessageToChat(message);
            });
            
            // Ø­ÙØ¸ Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø©
            if (data.sessionId) {
                sessionId = data.sessionId;
                localStorage.setItem('chatSession', JSON.stringify({
                    username: currentUser,
                    sessionId: sessionId,
                    timestamp: Date.now()
                }));
            }
        });
        
        socket.on('username-taken', (message) => {
            alert(message);
            document.getElementById('loginScreen').style.display = 'block';
            document.getElementById('chatScreen').style.display = 'none';
        });
        
        socket.on('kicked', (reason) => {
            alert(`ØªÙ… Ø·Ø±Ø¯Ùƒ Ù…Ù† Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©: ${reason}`);
            logout();
        });
        
        socket.on('message-deleted', (messageId) => {
            const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
            if (messageElement) {
                messageElement.remove();
            }
        });
        
        socket.on('chat-cleared', (data) => {
            document.getElementById('messagesContainer').innerHTML = '';
            addSystemMessage(`ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¨ÙˆØ§Ø³Ø·Ø© ${data.by}`);
        });
        
        socket.on('user-kicked', (data) => {
            addSystemMessage(`ØªÙ… Ø·Ø±Ø¯ ${data.username} Ø¨ÙˆØ§Ø³Ø·Ø© ${data.by}: ${data.reason}`);
        });

        socket.on('session-restored', (data) => {
            console.log('ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©:', data.user.username);
            currentUser = data.user.username;
            userRole = data.user.role;
            
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('chatScreen').style.display = 'flex';
            document.getElementById('copyrightFooter').style.display = 'none';
            toggleAdminButton();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            updateOnlineUsers(data.users);
            document.getElementById('messagesContainer').innerHTML = '';
            data.messages.forEach(message => {
                addMessageToChat(message);
            });
        });

        socket.on('error', (error) => {
            console.error('Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…:', error);
            alert(`Ø®Ø·Ø£: ${error}`);
        });
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    function setupEventListeners() {
        // Ø­Ø¯Ø« Enter Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener('click', function(e) {
            const emojiPanel = document.getElementById('emojiPanel');
            const emojiBtn = document.querySelector('.emoji-btn');
            
            if (emojiPanel.style.display === 'block' && 
                !emojiPanel.contains(e.target) && 
                !emojiBtn.contains(e.target)) {
                closeEmojiPanel();
            }
        });

        // Ù…Ù†Ø¹ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø­Ø±Ù Ø®Ø·ÙŠØ±Ø© ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const usernameInputs = ['guestName', 'memberName', 'newName'];
        usernameInputs.forEach(id => {
            const input = document.getElementById(id);
            if (input) {
                input.addEventListener('input', function(e) {
                    this.value = this.value.replace(/[<>{}[\]\\]/g, '');
                });
            }
        });
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    function checkSavedSession() {
        try {
            const savedSession = localStorage.getItem('chatSession');
            if (savedSession) {
                const session = JSON.parse(savedSession);
                const sessionAge = Date.now() - session.timestamp;
                
                // Ø§Ù„Ø¬Ù„Ø³Ø© ØµØ§Ù„Ø­Ø© Ù„Ù…Ø¯Ø© 24 Ø³Ø§Ø¹Ø©
                if (sessionAge < 24 * 60 * 60 * 1000) {
                    sessionId = session.sessionId;
                    // ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª
                } else {
                    localStorage.removeItem('chatSession');
                }
            }
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø©:', error);
            localStorage.removeItem('chatSession');
        }
    }

    // ===== Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ± =====

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª
    function renderMicrophones() {
        const grid = document.getElementById('microphonesGrid');
        grid.innerHTML = '';
        
        microphones.forEach(mic => {
            const isCurrentUser = mic.user === currentUser;
            const canControl = isCurrentUser || userRole === 'admin' || userRole === 'moderator';
            const timeOnMic = mic.joinTime ? Math.floor((Date.now() - mic.joinTime) / 60000) : 0;
            
            const micElement = document.createElement('div');
            micElement.className = `microphone-slot ${mic.active ? 'active' : ''} ${mic.muted ? 'muted' : ''} ${mic.priority ? 'priority' : ''}`;
            micElement.innerHTML = `
                <div class="microphone-header">
                    <div class="mic-number">Ù…Ø§ÙŠÙƒ ${mic.id}</div>
                    ${mic.priority ? '<div class="priority-badge">Ø£ÙˆÙ„ÙˆÙŠØ©</div>' : ''}
                </div>
                <div class="microphone-user">${mic.user || 'Ø´Ø§ØºØ±'}</div>
                ${mic.user ? `<div class="mic-time">${timeOnMic} Ø¯Ù‚ÙŠÙ‚Ø©</div>` : ''}
                
                <div class="microphone-controls">
                    ${mic.user ? `
                        ${canControl ? `
                            <button class="mic-btn mic-toggle ${mic.active ? 'active' : ''}" onclick="toggleMicrophone(${mic.id})" title="${mic.active ? 'Ø¥ÙŠÙ‚Ø§Ù' : 'ØªØ´ØºÙŠÙ„'}">
                                ${mic.active ? 'ğŸ”´' : 'ğŸŸ¢'}
                            </button>
                            <button class="mic-btn mic-mute ${mic.muted ? 'muted' : ''}" onclick="toggleMuteMicrophone(${mic.id})" title="${mic.muted ? 'Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ…' : 'ÙƒØªÙ…'}">
                                ${mic.muted ? 'ğŸ”‡' : 'ğŸ¤'}
                            </button>
                        ` : ''}
                        
                        ${isCurrentUser ? `
                            <button class="mic-btn mic-leave" onclick="leaveMicrophone(${mic.id})" title="ØªØ±Ùƒ Ø§Ù„Ù…Ø§ÙŠÙƒ">
                                ğŸ‘‹
                            </button>
                        ` : ''}
                        
                        ${(userRole === 'admin' || userRole === 'moderator') ? `
                            <button class="mic-btn mic-kick" onclick="kickFromMicrophone(${mic.id})" title="Ø·Ø±Ø¯ Ù…Ù† Ø§Ù„Ù…Ø§ÙŠÙƒ">
                                ğŸš«
                            </button>
                            <button class="mic-btn mic-priority" onclick="toggleMicrophonePriority(${mic.id})" title="${mic.priority ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©' : 'Ù…Ù†Ø­ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©'}">
                                ${mic.priority ? 'â­' : 'â˜†'}
                            </button>
                        ` : ''}
                    ` : `
                        <button class="mic-btn mic-join" onclick="takeMicrophone(${mic.id})" title="Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø§ÙŠÙƒ">
                            ğŸ¤
                        </button>
                    `}
                </div>
                
                ${mic.user && canControl ? `
                    <div class="mic-advanced-controls">
                        <div class="volume-control">
                            <label>Ø§Ù„ØµÙˆØª:</label>
                            <input type="range" min="0" max="100" value="${mic.volume}" 
                                   onchange="changeMicrophoneVolume(${mic.id}, this.value)" 
                                   ${!isCurrentUser ? 'disabled' : ''}>
                            <span>${mic.volume}%</span>
                        </div>
                        <div class="mic-settings">
                            <button class="setting-btn ${mic.noiseCancel ? 'active' : ''}" 
                                    onclick="toggleNoiseCancel(${mic.id})"
                                    ${!isCurrentUser ? 'disabled' : ''}>
                                Ø¥Ø²Ø§Ù„Ø© Ø¶ÙˆØ¶Ø§Ø¡: ${mic.noiseCancel ? 'âœ…' : 'âŒ'}
                            </button>
                        </div>
                    </div>
                ` : ''}
                
                <div class="mic-status ${mic.talking ? 'mic-talking' : ''}">
                    ${mic.talking ? 'ğŸ™ï¸ ÙŠØªØ­Ø¯Ø«...' : 
                      mic.muted ? 'ğŸ”‡ Ù…ÙƒØªÙˆÙ…' : 
                      mic.active ? 'ğŸŸ¢ Ù†Ø´Ø·' : 'âš« ØºÙŠØ± Ù†Ø´Ø·'}
                </div>
            `;
            grid.appendChild(micElement);
        });
    }

    // Ø§Ø­ØªÙ„Ø§Ù„ Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†
    function takeMicrophone(micId) {
        if (!currentUser) {
            alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
        if (!validateInput(currentUser)) {
            alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ØµØ§Ù„Ø­');
            return;
        }
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¯ÙŠÙ‡ Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¨Ø§Ù„ÙØ¹Ù„
        const userHasMic = microphones.find(m => m.user === currentUser);
        if (userHasMic && !confirm('Ù„Ø¯ÙŠÙƒ Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¨Ø§Ù„ÙØ¹Ù„. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¬Ø¯ÙŠØ¯ØŸ')) {
            return;
        }
        
        const mic = microphones.find(m => m.id === micId);
        if (mic && !mic.user) {
            // ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            if (userHasMic) {
                leaveMicrophone(userHasMic.id);
            }
            
            mic.user = currentUser;
            mic.active = true;
            mic.joinTime = Date.now();
            renderMicrophones();
            
            addSystemMessage(`${currentUser} Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† ${micId}`);
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø®Ø§Ø¯Ù…
            if (socket) {
                socket.emit('mic-joined', {
                    username: currentUser,
                    micId: micId
                });
            }
        } else if (mic && mic.user) {
            alert('Ù‡Ø°Ø§ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø­Ø¬ÙˆØ² Ø¨Ø§Ù„ÙØ¹Ù„');
        }
    }

    // ØªØ±Ùƒ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†
    function leaveMicrophone(micId) {
        const mic = microphones.find(m => m.id === micId);
        if (mic && mic.user === currentUser) {
            const timeSpent = Math.floor((Date.now() - mic.joinTime) / 60000);
            
            mic.user = null;
            mic.active = false;
            mic.muted = false;
            mic.talking = false;
            mic.volume = 100;
            mic.priority = false;
            mic.joinTime = null;
            
            renderMicrophones();
            addSystemMessage(`${currentUser} ØªØ±Ùƒ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¨Ø¹Ø¯ ${timeSpent} Ø¯Ù‚ÙŠÙ‚Ø©`);
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø®Ø§Ø¯Ù…
            if (socket) {
                socket.emit('mic-left', {
                    username: currentUser,
                    micId: micId,
                    timeSpent: timeSpent
                });
            }
        }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†
    function toggleMicrophone(micId) {
        const mic = microphones.find(m => m.id === micId);
        if (mic && (mic.user === currentUser || userRole === 'admin' || userRole === 'moderator')) {
            mic.active = !mic.active;
            
            if (mic.active) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ø¯Ø«
                mic.talking = true;
                setTimeout(() => {
                    mic.talking = false;
                    renderMicrophones();
                }, 2000 + Math.random() * 3000);
            } else {
                mic.talking = false;
            }
            
            renderMicrophones();
        }
    }

    // ÙƒØªÙ…/Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†
    function toggleMuteMicrophone(micId) {
        const mic = microphones.find(m => m.id === micId);
        if (mic && (mic.user === currentUser || userRole === 'admin' || userRole === 'moderator')) {
            mic.muted = !mic.muted;
            renderMicrophones();
            
            if (mic.muted) {
                addSystemMessage(`ØªÙ… ÙƒØªÙ… ${mic.user}`);
            } else {
                addSystemMessage(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… ${mic.user}`);
            }
        }
    }

    // ØªØºÙŠÙŠØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª
    function changeMicrophoneVolume(micId, volume) {
        const mic = microphones.find(m => m.id === micId);
        if (mic && mic.user === currentUser) {
            mic.volume = parseInt(volume);
            renderMicrophones();
        }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡
    function toggleNoiseCancel(micId) {
        const mic = microphones.find(m => m.id === micId);
        if (mic && mic.user === currentUser) {
            mic.noiseCancel = !mic.noiseCancel;
            renderMicrophones();
            
            addSystemMessage(`Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¶ÙˆØ¶Ø§Ø¡ ${mic.noiseCancel ? 'Ù…ÙØ¹Ù„Ø©' : 'Ù…Ø¹Ø·Ù„Ø©'} Ù„Ù€ ${currentUser}`);
        }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
    function toggleMicrophonePriority(micId) {
        if (userRole === 'admin' || userRole === 'moderator') {
            const mic = microphones.find(m => m.id === micId);
            if (mic && mic.user) {
                mic.priority = !mic.priority;
                renderMicrophones();
                
                addSystemMessage(`ØªÙ… ${mic.priority ? 'Ù…Ù†Ø­' : 'Ø¥Ù„ØºØ§Ø¡'} Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù€ ${mic.user}`);
            }
        }
    }

    // Ø·Ø±Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†
    function kickFromMicrophone(micId) {
        if (userRole === 'admin' || userRole === 'moderator') {
            const mic = microphones.find(m => m.id === micId);
            if (mic && mic.user) {
                const kickedUser = mic.user;
                const timeSpent = Math.floor((Date.now() - mic.joinTime) / 60000);
                
                mic.user = null;
                mic.active = false;
                mic.muted = false;
                mic.talking = false;
                mic.priority = false;
                mic.joinTime = null;
                
                renderMicrophones();
                addSystemMessage(`ØªÙ… Ø·Ø±Ø¯ ${kickedUser} Ù…Ù† Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ† Ø¨Ø¹Ø¯ ${timeSpent} Ø¯Ù‚ÙŠÙ‚Ø©`);
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø®Ø§Ø¯Ù…
                if (socket) {
                    socket.emit('mic-kicked', {
                        username: kickedUser,
                        micId: micId,
                        by: currentUser,
                        timeSpent: timeSpent
                    });
                }
            }
        }
    }

    // ÙƒØªÙ…/Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª
    function toggleMuteAll() {
        isMuteAll = !isMuteAll;
        microphones.forEach(mic => {
            if (mic.user) {
                mic.muted = isMuteAll;
            }
        });
        renderMicrophones();
        
        addSystemMessage(`ØªÙ… ${isMuteAll ? 'ÙƒØªÙ…' : 'Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ…'} Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª`);
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª
    function openMicrophoneSettings() {
        const settingsHtml = `
            <div class="settings-panel">
                <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª</h3>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" ${autoLeaveMic ? 'checked' : ''} onchange="autoLeaveMic = this.checked">
                        ØªØ±Ùƒ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
                    </label>
                </div>
                <div class="setting-item">
                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„ÙˆÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§ÙŠÙƒ (Ø¯Ù‚Ø§Ø¦Ù‚):</label>
                    <input type="number" id="maxMicTime" value="30" min="5" max="180">
                </div>
                <div class="setting-item">
                    <button class="profile-btn" onclick="applyMicrophoneSettings()">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                    <button class="profile-btn" onclick="closeModal()" style="background: #6c757d;">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </div>
        `;
        
        showModal('Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª', settingsHtml);
    }

    function applyMicrophoneSettings() {
        const maxTime = document.getElementById('maxMicTime').value;
        alert(`ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª:\n- ØªØ±Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠ: ${autoLeaveMic ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}\n- Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ${maxTime} Ø¯Ù‚ÙŠÙ‚Ø©`);
        closeModal();
    }

    // ØªØ±Ùƒ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
    function setupAutoLeave() {
        window.addEventListener('beforeunload', () => {
            if (autoLeaveMic) {
                microphones.forEach(mic => {
                    if (mic.user === currentUser) {
                        leaveMicrophone(mic.id);
                    }
                });
            }
        });
    }

    // ===== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© =====

    // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
    function validateInput(input) {
        if (!input || typeof input !== 'string') return false;
        
        const trimmed = input.trim();
        if (trimmed.length < 2 || trimmed.length > 20) return false;
        
        // Ù…Ù†Ø¹ Ø£Ø­Ø±Ù Ø®Ø§ØµØ© Ø®Ø·ÙŠØ±Ø©
        const dangerousChars = /[<>{}[\]\\]/;
        return !dangerousChars.test(trimmed);
    }

    // ØªÙˆÙ„ÙŠØ¯ Ù„ÙˆÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    function getRandomColor() {
        const colors = ['#2F5C73', '#28a745', '#dc3545', '#ffc107', '#6f42c1', '#e83e8c', '#fd7e14'];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // Ø¹Ø±Ø¶ Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    function showLoading(message) {
        const loadingIndicator = document.getElementById('loadingIndicator');
        const loadingContent = document.getElementById('loadingContent');
        
        loadingContent.textContent = message;
        loadingIndicator.style.display = 'flex';
    }

    function hideLoading() {
        document.getElementById('loadingIndicator').style.display = 'none';
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    function showModal(title, content) {
        const modal = document.createElement('div');
        modal.className = 'modal-overlay';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3>${title}</h3>
                    <button class="close-modal" onclick="closeModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    ${content}
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }

    function closeModal() {
        const modal = document.querySelector('.modal-overlay');
        if (modal) modal.remove();
    }

    // ===== Ø¯ÙˆØ§Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© =====

    // ØªØ¨Ø¯ÙŠÙ„ ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
    function switchTab(tabNumber) {
        currentTab = tabNumber;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.tab').forEach((tab, index) => {
            if (index + 1 === tabNumber) {
                tab.classList.add('active');
            } else {
                tab.classList.remove('active');
            }
        });
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.login-form').forEach((form, index) => {
            if (index + 1 === tabNumber) {
                form.classList.add('active');
            } else {
                form.classList.remove('active');
            }
        });
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function login(type) {
        let username = '';
        
        if (type === 1) {
            username = document.getElementById('guestName').value.trim();
        } else if (type === 2) {
            username = document.getElementById('memberName').value.trim();
        } else if (type === 3) {
            username = document.getElementById('newName').value.trim();
        }
        
        // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        if (!username) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            return;
        }
        
        if (!validateInput(username)) {
            alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± ØµØ§Ù„Ø­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 2-20 Ø­Ø±ÙØ§Ù‹ Ø¨Ø¯ÙˆÙ† Ø±Ù…ÙˆØ² Ø®Ø·ÙŠØ±Ø©');
            return;
        }
        
        currentUser = username;
        setUserRole(username);
        
        showLoading('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...');
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø®Ø§Ø¯Ù…
        socket.emit('user-joined', {
            username: username,
            role: userRole
        });
        
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('chatScreen').style.display = 'flex';
        document.getElementById('copyrightFooter').style.display = 'none';
        toggleAdminButton();
        
        hideLoading();
    }

    // ØªØ­Ø¯ÙŠØ¯ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function setUserRole(username) {
        const lowerUsername = username.toLowerCase();
        
        if (adminUsers.some(admin => lowerUsername.includes(admin.toLowerCase()))) {
            userRole = 'admin';
        } else if (moderatorUsers.some(mod => lowerUsername.includes(mod.toLowerCase()))) {
            userRole = 'moderator';
        } else {
            userRole = 'user';
        }
    }

    // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    function toggleAdminButton() {
        const adminBtn = document.getElementById('adminPanelBtn');
        if (userRole === 'admin' || userRole === 'moderator') {
            adminBtn.style.display = 'block';
        } else {
            adminBtn.style.display = 'none';
        }
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
    function sendMessage() {
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value.trim();
        
        if (!message) {
            alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©');
            return;
        }
        
        // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        if (!validateMessage(message)) {
            alert('Ø§Ù„Ø±Ø³Ø§Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­');
            return;
        }
        
        const messageData = {
            username: currentUser,
            message: message,
            role: userRole
        };
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø®Ø§Ø¯Ù…
        socket.emit('new-message', messageData);
        
        messageInput.value = '';
        closeEmojiPanel();
    }

    // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    function validateMessage(message) {
        if (!message || typeof message !== 'string') return false;
        
        const trimmed = message.trim();
        if (trimmed.length === 0) return false;
        if (trimmed.length > 1000) return false;
        
        // Ù…Ù†Ø¹ Ù…Ø­ØªÙˆÙ‰ Ø¶Ø§Ø±
        const harmfulPatterns = [
            /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
            /javascript:/gi,
            /on\w+\s*=/gi
        ];
        
        return !harmfulPatterns.some(pattern => pattern.test(trimmed));
    }

    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø´Ø§Øª
    function addMessageToChat(messageData) {
        const messagesContainer = document.getElementById('messagesContainer');
        
        const isSystemMessage = messageData.type === 'system';
        const isAdminMessage = messageData.role === 'admin' || messageData.role === 'moderator';
        
        if (isSystemMessage) {
            // Ø±Ø³Ø§Ù„Ø© Ù†Ø¸Ø§Ù…
            const systemMsg = document.createElement('div');
            systemMsg.className = 'message system-message';
            systemMsg.setAttribute('data-message-id', messageData.id);
            systemMsg.innerHTML = `
                <div class="message-content">
                    <div class="message-text">${messageData.message}</div>
                    <div class="message-time">${messageData.time}</div>
                </div>
            `;
            messagesContainer.appendChild(systemMsg);
        } else {
            // Ø±Ø³Ø§Ù„Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ
            const senderClass = isAdminMessage ? 'admin-sender' : '';
            const adminBadge = isAdminMessage ? '<div class="admin-badge">A</div>' : '';
            const deleteButton = (userRole === 'admin' || userRole === 'moderator') ? 
                '<button class="delete-message-btn" onclick="deleteMessage(' + messageData.id + ')">Ã—</button>' : '';
            
            const userMessage = document.createElement('div');
            userMessage.className = 'message';
            userMessage.setAttribute('data-message-id', messageData.id);
            userMessage.innerHTML = `
                <div class="user-avatar" onclick="openProfile('${messageData.username}')" style="background-color: ${getRandomColor()}">
                    ${messageData.username.charAt(0)}
                    ${adminBadge}
                </div>
                <div class="message-content">
                    ${deleteButton}
                    <div class="message-header">
                        <div class="message-sender ${senderClass}" onclick="openProfile('${messageData.username}')">${messageData.username}</div>
                        <div class="message-time">${messageData.time}</div>
                    </div>
                    <div class="message-text">${messageData.message}</div>
                </div>
            `;
            
            messagesContainer.appendChild(userMessage);
        }
        
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù†Ø¸Ø§Ù…
    function addSystemMessage(message) {
        const messagesContainer = document.getElementById('messagesContainer');
        
        const systemMsg = document.createElement('div');
        systemMsg.className = 'message system-message';
        systemMsg.innerHTML = `
            <div class="message-content">
                <div class="message-text">${message}</div>
                <div class="message-time">${new Date().toLocaleTimeString('ar-EG')}</div>
            </div>
        `;
        
        messagesContainer.appendChild(systemMsg);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø©
    function deleteMessage(messageId) {
        if (userRole === 'admin' || userRole === 'moderator') {
            socket.emit('delete-message', messageId);
        } else {
            alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ø¦Ù„');
        }
    }

    // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ†
    function updateOnlineUsers(users) {
        const onlineUsersContainer = document.getElementById('onlineUsers');
        
        // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ
        onlineUsersContainer.innerHTML = '';
        
        if (users.length === 0) {
            const noUsersMsg = document.createElement('div');
            noUsersMsg.className = 'no-users';
            noUsersMsg.textContent = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªÙˆØ§Ø¬Ø¯ÙŠÙ† Ø­Ø§Ù„ÙŠØ§Ù‹';
            onlineUsersContainer.appendChild(noUsersMsg);
        } else {
            users.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div class="user-avatar" onclick="openProfile('${user.username}')" style="background-color: ${user.avatar || getRandomColor()}">
                        ${user.username.charAt(0)}
                    </div>
                    <span>${user.username}</span>
                    ${user.role !== 'user' ? '<span style="color: #dc3545; font-size: 12px;">(Ù…Ø´Ø±Ù)</span>' : ''}
                `;
                onlineUsersContainer.appendChild(userItem);
            });
        }
    }

    // ===== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ =====

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    function loadEmojis(category) {
        const emojiGrid = document.getElementById('emojiGrid');
        emojiGrid.innerHTML = '';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
        document.querySelectorAll('.emoji-category').forEach(btn => {
            btn.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
        emojis[category].forEach(emoji => {
            const emojiElement = document.createElement('div');
            emojiElement.className = 'emoji';
            emojiElement.textContent = emoji;
            emojiElement.onclick = () => insertEmoji(emoji);
            emojiGrid.appendChild(emojiElement);
        });
    }

    // ØªØ¨Ø¯ÙŠÙ„ ÙØ¦Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    function switchEmojiCategory(category) {
        loadEmojis(category);
    }

    // Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    function insertEmoji(emoji) {
        const messageInput = document.getElementById('messageInput');
        messageInput.value += emoji;
        messageInput.focus();
    }

    // ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
    function toggleEmojiPanel() {
        const emojiPanel = document.getElementById('emojiPanel');
        if (emojiPanel.style.display === 'block') {
            closeEmojiPanel();
        } else {
            emojiPanel.style.display = 'block';
        }
    }

    function closeEmojiPanel() {
        document.getElementById('emojiPanel').style.display = 'none';
    }

    // ===== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ =====

    // ÙØªØ­ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function openProfile(username) {
        currentProfileUser = username;
        const profilePanel = document.getElementById('profilePanel');
        const profileName = document.getElementById('profileName');
        const profileRole = document.getElementById('profileRole');
        const profileAvatar = document.getElementById('profileAvatar');
        const adminSection = document.getElementById('adminProfileSection');
        
        // ØªØ¹ÙŠÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
        profileName.textContent = username;
        
        // ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        let roleText = 'Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ';
        let roleColor = '#2F5C73';
        
        if (adminUsers.some(admin => username.toLowerCase().includes(admin.toLowerCase()))) {
            roleText = 'Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…';
            roleColor = '#dc3545';
        } else if (moderatorUsers.some(mod => username.toLowerCase().includes(mod.toLowerCase()))) {
            roleText = 'Ù…Ø´Ø±Ù';
            roleColor = '#28a745';
        }
        
        profileRole.textContent = roleText;
        profileRole.style.color = roleColor;
        
        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©
        profileAvatar.textContent = username.charAt(0);
        profileAvatar.style.backgroundColor = getRandomColor();
        
        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø´Ø±Ù
        if (userRole === 'admin' || userRole === 'moderator') {
            adminSection.style.display = 'block';
        } else {
            adminSection.style.display = 'none';
        }
        
        profilePanel.style.display = 'block';
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
    function closeProfile() {
        document.getElementById('profilePanel').style.display = 'none';
        currentProfileUser = null;
    }

    // ===== Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø´Ø±Ù ÙÙŠ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ =====

    // Ø·Ø±Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù„Ù„Ù…Ø´Ø±ÙÙŠÙ†)
    function adminKickUser() {
        if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø·Ø±Ø¯ ${currentProfileUser}ØŸ`)) {
            socket.emit('kick-user', {
                username: currentProfileUser,
                by: currentUser,
                reason: 'Ø¨Ø£Ù…Ø± Ø§Ù„Ù…Ø´Ø±Ù'
            });
            closeProfile();
        }
    }

    // Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù„Ù„Ù…Ø´Ø±ÙÙŠÙ†)
    function adminBanUser() {
        if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø¸Ø± ${currentProfileUser} Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù…ØŸ`)) {
            addSystemMessage(`ØªÙ… Ø­Ø¸Ø± ${currentProfileUser} Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù…`);
            closeProfile();
        }
    }

    // ===== Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø´Ø±Ù ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… =====

    function resetAllMicrophones() {
        microphones.forEach(mic => {
            mic.user = null;
            mic.active = false;
            mic.muted = false;
            mic.talking = false;
            mic.priority = false;
            mic.joinTime = null;
        });
        renderMicrophones();
    }

    function clearChat() {
        if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ØŸ')) {
            socket.emit('clear-chat', { by: currentUser });
        }
    }

    function kickUser() {
        const username = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø·Ø±Ø¯Ù‡:');
        if (username) {
            socket.emit('kick-user', {
                username: username,
                by: currentUser,
                reason: 'Ø¨Ø£Ù…Ø± Ø§Ù„Ù…Ø´Ø±Ù'
            });
        }
    }

    function banUser() {
        const username = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø­Ø¸Ø±Ù‡:');
        if (username) {
            addSystemMessage(`ØªÙ… Ø­Ø¸Ø± ${username} Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ù…`);
        }
    }

    function muteUser() {
        const username = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ÙƒØªÙ…Ù‡:');
        if (username) {
            addSystemMessage(`ØªÙ… ÙƒØªÙ… ${username}`);
        }
    }

    // ===== Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… =====

    function shuffleMicrophones() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„');
    }

    function kickAllFromMicrophones() {
        microphones.forEach(mic => {
            if (mic.user) {
                mic.user = null;
                mic.active = false;
                mic.muted = false;
                mic.talking = false;
                mic.priority = false;
                mic.joinTime = null;
            }
        });
        renderMicrophones();
        addSystemMessage('ØªÙ… Ø·Ø±Ø¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª');
    }

    function addCustomEmoji() {
        const emoji = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø§Ù„Ù…Ø®ØµØµ:');
        if (emoji) {
            emojis.faces.unshift(emoji);
            loadEmojis('faces');
        }
    }

    function manageEmojiCategories() {
        alert('Ø¥Ø¯Ø§Ø±Ø© ÙØ¦Ø§Øª Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ:\n\n- ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©\n- Ø­Ø°Ù ÙØ¦Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©\n- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ÙÙŠ ÙƒÙ„ ÙØ¦Ø©');
    }

    function resetEmojiSettings() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠØŸ')) {
            location.reload();
        }
    }

    // ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    function openAdminPanel() {
        if (userRole !== 'admin' && userRole !== 'moderator') {
            alert('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…');
            return;
        }
        document.getElementById('adminPanel').style.display = 'block';
    }

    function closeAdminPanel() {
        document.getElementById('adminPanel').style.display = 'none';
    }

    // ===== Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© =====

    function adminMuteUser() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function adminViewIP() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function adminPromoteUser() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function adminRemoveAvatar() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function sendPrivateMessage() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function viewProfileHistory() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    function changeAvatar() {
        alert('Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©');
    }

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
    function logout() {
        // ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ø§ÙŠÙƒØ±ÙˆÙÙˆÙ†Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ´ØºÙ„Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        microphones.forEach(mic => {
            if (mic.user === currentUser) {
                leaveMicrophone(mic.id);
            }
        });
        
        // Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙˆÙƒÙŠØª
        if (socket) {
            socket.disconnect();
        }
        
        // Ù…Ø³Ø­ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        localStorage.removeItem('chatSession');
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        location.reload();
    }
  </script>
</body>
</html>